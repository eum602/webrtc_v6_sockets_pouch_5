{"ast":null,"code":"import _regeneratorRuntime from \"/home/usuario1/Desktop/projects_P2P/webrtc_v6_sockets_pouch_3/webrtc/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/usuario1/Desktop/projects_P2P/webrtc_v6_sockets_pouch_3/webrtc/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/usuario1/Desktop/projects_P2P/webrtc_v6_sockets_pouch_3/webrtc/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport PouchDB from 'pouchdb';\nimport { v1 } from 'uuid';\n\nvar DB = function DB(name) {\n  var _this = this;\n\n  _classCallCheck(this, DB);\n\n  this.getUUID =\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var node_uuid;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _this.db.get('my_UUID').then(function (result) {\n              return node_uuid = result.value;\n            }).catch(function (e) {\n              return node_uuid = e.name;\n            });\n\n          case 2:\n            return _context.abrupt(\"return\", node_uuid);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  this.createUUID = function () {\n    return v1();\n  };\n\n  this.saveUUID =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(my_UUID) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _this.db.put({\n                _id: 'my_UUID',\n                value: my_UUID\n              }).then(function (r) {\n                return my_UUID;\n              }).catch(function (e) {\n                return console.log('Error saving id: ', e.name);\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  this.saveBlockchain =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(B) {\n      var res, id;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return _this.db.put({\n                _id: 'Blockchain',\n                value: B\n              });\n\n            case 3:\n              res = _context3.sent;\n              id = res.id;\n              return _context3.abrupt(\"return\", id);\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log('Error on saveBlockchain method in class DB.js: ', _context3.t0);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[0, 8]]);\n    }));\n\n    return function (_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  this.db = new PouchDB(name);\n};\n\nexport { DB as default };","map":{"version":3,"sources":["/home/usuario1/Desktop/projects_P2P/webrtc_v6_sockets_pouch_3/webrtc/src/DB.js"],"names":["PouchDB","v1","DB","name","getUUID","db","get","then","result","node_uuid","value","catch","e","createUUID","saveUUID","my_UUID","put","_id","r","console","log","saveBlockchain","B","res","id"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,SAASC,EAAT,QAAmB,MAAnB;;IAEqBC,E,GACjB,YAAYC,IAAZ,EAAiB;AAAA;;AAAA;;AAAA,OAIjBC,OAJiB;AAAA;AAAA;AAAA;AAAA,2BAIP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEA,KAAI,CAACC,EAAL,CAAQC,GAAR,CAAY,SAAZ,EAAuBC,IAAvB,CAA4B,UAAAC,MAAM;AAAA,qBAAIC,SAAS,GAAGD,MAAM,CAACE,KAAvB;AAAA,aAAlC,EAAiEC,KAAjE,CAAuE,UAAAC,CAAC;AAAA,qBAAIH,SAAS,GAAGG,CAAC,CAACT,IAAlB;AAAA,aAAxE,CAFA;;AAAA;AAAA,6CAGCM,SAHD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAJO;;AAAA,OAUjBI,UAViB,GAUJ,YAAK;AACd,WAAOZ,EAAE,EAAT;AACH,GAZgB;;AAAA,OAcjBa,QAdiB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAcN,kBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACD,KAAI,CAACV,EAAL,CAAQW,GAAR,CAAY;AAACC,gBAAAA,GAAG,EAAC,SAAL;AAAeP,gBAAAA,KAAK,EAACK;AAArB,eAAZ,EAA2CR,IAA3C,CAAgD,UAAAW,CAAC,EAAE;AAAC,uBAAOH,OAAP;AAAe,eAAnE,EACLJ,KADK,CACC,UAAAC,CAAC;AAAA,uBAAEO,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCR,CAAC,CAACT,IAAnC,CAAF;AAAA,eADF,CADC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAdM;;AAAA;AAAA;AAAA;AAAA;;AAAA,OAmBjBkB,cAnBiB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAmBA,kBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAES,KAAI,CAACjB,EAAL,CAAQW,GAAR,CAAY;AAACC,gBAAAA,GAAG,EAAC,YAAL;AAAkBP,gBAAAA,KAAK,EAACY;AAAxB,eAAZ,CAFT;;AAAA;AAEHC,cAAAA,GAFG;AAGFC,cAAAA,EAHE,GAGID,GAHJ,CAGFC,EAHE;AAAA,gDAIFA,EAJE;;AAAA;AAAA;AAAA;AAKHL,cAAAA,OAAO,CAACC,GAAR,CAAY,iDAAZ;;AALG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAnBA;;AAAA;AAAA;AAAA;AAAA;;AACb,OAAKf,EAAL,GAAU,IAAIL,OAAJ,CAAYG,IAAZ,CAAV;AACH,C;;SAHgBD,E","sourcesContent":["import PouchDB from 'pouchdb'\nimport { v1 } from 'uuid';\n\nexport default class DB {\n    constructor(name){\n        this.db = new PouchDB(name)\n    }\n\n    getUUID = async () => {\n        let node_uuid \n        await this.db.get('my_UUID').then(result => node_uuid = result.value ).catch(e => node_uuid = e.name)        \n        return node_uuid\n    }\n\n    createUUID = () =>{\n        return v1()\n    }\n\n    saveUUID = async (my_UUID) => {\n        await this.db.put({_id:'my_UUID',value:my_UUID}).then(r=>{return my_UUID})\n        .catch(e=>console.log('Error saving id: ', e.name ))\n    }\n\n    saveBlockchain = async (B) =>{\n        try{\n            const res = await this.db.put({_id:'Blockchain',value:B})\n            const {id} = res\n            return id\n        }catch(e){console.log('Error on saveBlockchain method in class DB.js: ',e)}\n    }\n    \n}"]},"metadata":{},"sourceType":"module"}